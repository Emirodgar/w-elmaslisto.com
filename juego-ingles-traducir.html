<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crea la Frase</title>
    <link rel="icon" href="img/favicon.png">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #a984e5; margin: 0; padding: 15px; box-sizing: border-box; }
        .game-container { width: 100%; max-width: 550px; background: #fff; padding: 25px; border-radius: 20px; box-shadow: 0 8px 0 #8e6ac5; }
        .source-sentence { display: flex; align-items: center; font-size: 1.5em; color: #555; margin-bottom: 20px; }
        .source-sentence img { width: 40px; height: 40px; margin-right: 15px; }
        .target-area { min-height: 60px; border-bottom: 2px solid #eee; padding-bottom: 10px; display: flex; flex-wrap: wrap; gap: 10px; }
        .word-bank { min-height: 100px; margin-top: 20px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
        .word-bubble { padding: 10px 20px; font-size: 1.2em; background-color: #f0f0f0; border: 1px solid #ddd; border-bottom-width: 3px; border-radius: 10px; cursor: pointer; }
        .word-bubble.in-bank { background-color: #fff; }
        .word-bubble.in-target { background-color: #e0e0e0; }
        #check-button { width: 100%; padding: 20px; font-size: 1.5em; font-weight: bold; color: white; background-color: #58cc02; border: none; border-radius: 15px; cursor: pointer; margin-top: 20px; box-shadow: 0 5px 0 #4aa302; transition: all 0.1s; }
        #check-button:disabled { background-color: #ccc; box-shadow: 0 5px 0 #aaa; }
        #check-button:active:not(:disabled) { transform: translateY(5px); box-shadow: 0 0 0 #4aa302; }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="source-sentence">
            <img src="https://img.icons8.com/plasticine/100/spain-2-flag.png" alt="Bandera de España">
            <span id="source-text"></span>
        </div>
        <div class="target-area" id="target-area"></div>
        <div class="word-bank" id="word-bank"></div>
        <button id="check-button" disabled>COMPROBAR</button>
    </div>
    <script>
        const sentences = [
            { es: "Yo tengo un perro", en: "I have a dog" },
            { es: "El cielo es azul", en: "The sky is blue" },
            { es: "Me gusta el queso", en: "I like cheese" }
        ];
        let currentSentence;
        const sourceTextEl = document.getElementById('source-text' );
        const targetAreaEl = document.getElementById('target-area');
        const wordBankEl = document.getElementById('word-bank');
        const checkButton = document.getElementById('check-button');

        function setupRound() {
            currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
            sourceTextEl.textContent = currentSentence.es;
            targetAreaEl.innerHTML = '';
            wordBankEl.innerHTML = '';
            checkButton.disabled = true;

            const words = currentSentence.en.split(' ').sort(() => Math.random() - 0.5);
            words.forEach(word => {
                const bubble = createBubble(word, 'in-bank');
                bubble.onclick = () => moveBubble(bubble, wordBankEl, targetAreaEl);
                wordBankEl.appendChild(bubble);
            });
        }

        function createBubble(text, area) {
            const bubble = document.createElement('div');
            bubble.textContent = text;
            bubble.classList.add('word-bubble', area);
            return bubble;
        }

        function moveBubble(bubble, from, to) {
            from.removeChild(bubble);
            bubble.classList.replace(from.id.includes('bank') ? 'in-bank' : 'in-target', to.id.includes('bank') ? 'in-bank' : 'in-target');
            bubble.onclick = () => moveBubble(bubble, to, from);
            to.appendChild(bubble);
            checkButton.disabled = targetAreaEl.children.length === 0;
        }

        checkButton.onclick = () => {
            const userAnswer = Array.from(targetAreaEl.children).map(b => b.textContent).join(' ');
            if (userAnswer === currentSentence.en) {
                checkButton.style.backgroundColor = '#d7ffb8';
                checkButton.style.color = '#58a700';
                checkButton.textContent = '¡CORRECTO!';
                setTimeout(() => {
                    checkButton.style.backgroundColor = '#58cc02';
                    checkButton.style.color = 'white';
                    checkButton.textContent = 'COMPROBAR';
                    setupRound();
                }, 2000);
            } else {
                checkButton.style.backgroundColor = '#ffdfe0';
                checkButton.style.color = '#ea2b2b';
                checkButton.textContent = 'INTÉNTALO DE NUEVO';
                setTimeout(() => {
                    checkButton.style.backgroundColor = '#58cc02';
                    checkButton.style.color = 'white';
                    checkButton.textContent = 'COMPROBAR';
                }, 2000);
            }
        };
        setupRound();
    </script>
</body>
</html>
